---
description: 
globs: 
alwaysApply: true
---
# Service Startup Rules - æœåŠ¡å¯åŠ¨è§„åˆ™

## é‡è¦æé†’ - Critical Reminders

### ğŸš¨ å¸¸è§é”™è¯¯é¿å… - Common Mistakes to Avoid
1. **ç›®å½•é”™è¯¯**: ç»ˆç«¯åœ¨ `project` ç›®å½•ï¼Œä½†backendåœ¨ `project/JobCatcher/backend`
2. **ç«¯å£æ£€æŸ¥å¿½ç•¥**: å¯åŠ¨å‰å¿…é¡»æ£€æŸ¥ç«¯å£å ç”¨æƒ…å†µ
3. **è™šæ‹Ÿç¯å¢ƒæœªæ¿€æ´»**: å¿…é¡»å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
4. **PYTHONPATHæœªè®¾ç½®**: ç¯å¢ƒå˜é‡è®¾ç½®é”™è¯¯
5. **âš ï¸ æœ€å…³é”®é”™è¯¯**: ä¸åœ¨backendç›®å½•ä¸‹æ‰§è¡Œuvicornå‘½ä»¤å¯¼è‡´ModuleNotFoundError

### ğŸ“ æ­£ç¡®ç›®å½•ç»“æ„ - Correct Directory Structure
```
project/                    # ç»ˆç«¯å½“å‰ä½ç½®
â””â”€â”€ JobCatcher/
    â”œâ”€â”€ backend/            # åç«¯æœåŠ¡ç›®å½• (æ­£ç¡®çš„å·¥ä½œç›®å½•)
    â”‚   â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ requirements.txt
    â”‚   â””â”€â”€ main.py
    â””â”€â”€ frontend/           # å‰ç«¯æœåŠ¡ç›®å½•
        â”œâ”€â”€ index.html
        â”œâ”€â”€ css/
        â”œâ”€â”€ js/
        â””â”€â”€ assets/
```

---

# ğŸ”§ åç«¯æœåŠ¡å¯åŠ¨ - Backend Service Startup

## âœ… åç«¯æ­£ç¡®å¯åŠ¨æµç¨‹ - Backend Startup Process

### 1. æ£€æŸ¥ç«¯å£å ç”¨ - Check Port Usage
```bash
# æ£€æŸ¥8000ç«¯å£å ç”¨
netstat -tulpn | grep :8000
# æˆ–è€…
lsof -i :8000

# å¦‚æœç«¯å£è¢«å ç”¨ï¼Œæ€æ­»è¿›ç¨‹
kill -9 <PID>
# æˆ–è€…å¼ºåˆ¶æ€æ­»æ‰€æœ‰å ç”¨8000ç«¯å£çš„è¿›ç¨‹
sudo fuser -k 8000/tcp
# æˆ–è€…æ€æ­»æ‰€æœ‰uvicornè¿›ç¨‹
pkill -f uvicorn
```

### 2. è¿›å…¥æ­£ç¡®ç›®å½• - Navigate to Correct Directory
```bash
# ä»projectç›®å½•å¼€å§‹ï¼Œå¿…é¡»è¿›å…¥backendç›®å½•
cd JobCatcher/backend
pwd  # ç¡®è®¤å½“å‰åœ¨ /home/devbox/project/JobCatcher/backend
```

### 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ - Activate Virtual Environment
```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (è·¯å¾„ç›¸å¯¹äºprojectæ ¹ç›®å½•)
source ../../bin/activate
# ç¡®è®¤è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
which python
which pip
```

### 4. è®¾ç½®PYTHONPATH - Set PYTHONPATH
```bash
# è®¾ç½®æ­£ç¡®çš„PYTHONPATH
export PYTHONPATH=/home/devbox/project/JobCatcher/backend:$PYTHONPATH
echo $PYTHONPATH  # ç¡®è®¤è®¾ç½®æ­£ç¡®
```

### 5. æµ‹è¯•æ¨¡å—å¯¼å…¥ - Test Module Import
```bash
# åœ¨backendç›®å½•ä¸‹æµ‹è¯•æ¨¡å—å¯¼å…¥
python -c "from app.main import app; print('âœ… åº”ç”¨æ¨¡å—å¯¼å…¥æˆåŠŸ')"
```

### 6. å¯åŠ¨åç«¯æœåŠ¡ - Start Backend Service
```bash
# âš ï¸ å…³é”®ï¼šå¿…é¡»åœ¨backendç›®å½•ä¸‹æ‰§è¡Œæ­¤å‘½ä»¤
# å½“å‰ç›®å½•å¿…é¡»æ˜¯ /home/devbox/project/JobCatcher/backend
pwd  # å†æ¬¡ç¡®è®¤ç›®å½•
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

---

# ğŸŒ å‰ç«¯æœåŠ¡å¯åŠ¨ - Frontend Service Startup

## âœ… å‰ç«¯æ­£ç¡®å¯åŠ¨æµç¨‹ - Frontend Startup Process

### 1. æ£€æŸ¥ç«¯å£å ç”¨ - Check Port Usage
```bash
# æ£€æŸ¥7860ç«¯å£å ç”¨ï¼ˆå‰ç«¯é»˜è®¤ç«¯å£ï¼‰
netstat -tulpn | grep :7860
# æˆ–è€…
lsof -i :7860

# å¦‚æœç«¯å£è¢«å ç”¨ï¼Œæ€æ­»è¿›ç¨‹
kill -9 <PID>
# æˆ–è€…å¼ºåˆ¶æ€æ­»æ‰€æœ‰å ç”¨7860ç«¯å£çš„è¿›ç¨‹
sudo fuser -k 7860/tcp
```

### 2. è¿›å…¥å‰ç«¯ç›®å½• - Navigate to Frontend Directory
```bash
# ä»projectç›®å½•å¼€å§‹ï¼Œè¿›å…¥frontendç›®å½•
cd JobCatcher/frontend
pwd  # ç¡®è®¤å½“å‰åœ¨ /home/devbox/project/JobCatcher/frontend
```

### 3. æ£€æŸ¥å‰ç«¯æ–‡ä»¶ - Check Frontend Files
```bash
# æ£€æŸ¥å‰ç«¯æ–‡ä»¶ç»“æ„
ls -la
# ç¡®è®¤ä¸»è¦æ–‡ä»¶å­˜åœ¨
ls -la index.html css/ js/ assets/
```

### 4. å¯åŠ¨å‰ç«¯æœåŠ¡ - Start Frontend Service

#### æ–¹æ³•1: ä½¿ç”¨Pythonå†…ç½®HTTPæœåŠ¡å™¨ (æ¨è)
```bash
# åœ¨frontendç›®å½•ä¸‹å¯åŠ¨HTTPæœåŠ¡å™¨
python -m http.server 7860
# æˆ–è€…ä½¿ç”¨Python3
python3 -m http.server 7860
```

#### æ–¹æ³•2: ä½¿ç”¨Node.jsæœåŠ¡å™¨ (å¦‚æœå®‰è£…äº†Node.js)
```bash
# æ£€æŸ¥æ˜¯å¦å®‰è£…äº†Node.js
node --version
npm --version

# å¦‚æœå®‰è£…äº†Node.jsï¼Œå¯ä»¥ä½¿ç”¨http-server
npx http-server -p 7860 -c-1
```

#### æ–¹æ³•3: ä½¿ç”¨Live Server (å¦‚æœéœ€è¦çƒ­é‡è½½)
```bash
# å®‰è£…live-server (å¦‚æœéœ€è¦)
npm install -g live-server

# å¯åŠ¨live-server
live-server --port=7860 --host=0.0.0.0
```

### 5. éªŒè¯å‰ç«¯æœåŠ¡ - Verify Frontend Service
```bash
# æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯åŠ¨
curl -s http://localhost:7860/ | head -10

# æˆ–è€…åœ¨æµè§ˆå™¨ä¸­è®¿é—®
echo "å‰ç«¯æœåŠ¡å·²å¯åŠ¨ï¼Œè¯·è®¿é—®: http://localhost:7860"
```

---

# ğŸ”§ å®Œæ•´å¯åŠ¨è„šæœ¬ - Complete Startup Scripts

## åç«¯å¯åŠ¨è„šæœ¬ - Backend Startup Script
```bash
#!/bin/bash
# ä»projectç›®å½•æ‰§è¡Œæ­¤è„šæœ¬

echo "ğŸš€ å¯åŠ¨JobCatcheråç«¯æœåŠ¡..."

# 1. æ£€æŸ¥å’Œæ¸…ç†ç«¯å£
echo "ğŸ” æ£€æŸ¥ç«¯å£8000å ç”¨æƒ…å†µ..."
if lsof -i :8000; then
    echo "âš ï¸  ç«¯å£8000è¢«å ç”¨ï¼Œæ­£åœ¨æ¸…ç†..."
    sudo fuser -k 8000/tcp
    sleep 2
fi

# 2. è¿›å…¥backendç›®å½• - å…³é”®æ­¥éª¤
echo "ğŸ“ è¿›å…¥backendç›®å½•..."
cd JobCatcher/backend || exit 1
pwd
echo "âœ… å½“å‰ç›®å½•: $(pwd)"

# 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
echo "ğŸ æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ..."
source ../../bin/activate
which python

# 4. è®¾ç½®PYTHONPATH
echo "ğŸ”§ è®¾ç½®PYTHONPATH..."
export PYTHONPATH=/home/devbox/project/JobCatcher/backend:$PYTHONPATH

# 5. æ£€æŸ¥ä¾èµ–
echo "ğŸ“¦ æ£€æŸ¥ä¾èµ–..."
pip list | grep fastapi
pip list | grep uvicorn

# 6. æµ‹è¯•æ¨¡å—å¯¼å…¥
echo "ğŸ§ª æµ‹è¯•æ¨¡å—å¯¼å…¥..."
python -c "from app.main import app; print('âœ… æ¨¡å—å¯¼å…¥æˆåŠŸ')"

# 7. å¯åŠ¨æœåŠ¡ - åœ¨backendç›®å½•ä¸‹æ‰§è¡Œ
echo "ğŸš€ åœ¨backendç›®å½•ä¸‹å¯åŠ¨JobCatcheråç«¯æœåŠ¡..."
echo "å½“å‰å·¥ä½œç›®å½•: $(pwd)"
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

## å‰ç«¯å¯åŠ¨è„šæœ¬ - Frontend Startup Script
```bash
#!/bin/bash
# ä»projectç›®å½•æ‰§è¡Œæ­¤è„šæœ¬

echo "ğŸŒ å¯åŠ¨JobCatcherå‰ç«¯æœåŠ¡..."

# 1. æ£€æŸ¥å’Œæ¸…ç†ç«¯å£
echo "ğŸ” æ£€æŸ¥ç«¯å£7860å ç”¨æƒ…å†µ..."
if lsof -i :7860; then
    echo "âš ï¸  ç«¯å£7860è¢«å ç”¨ï¼Œæ­£åœ¨æ¸…ç†..."
    sudo fuser -k 7860/tcp
    sleep 2
fi

# 2. è¿›å…¥frontendç›®å½•
echo "ğŸ“ è¿›å…¥frontendç›®å½•..."
cd JobCatcher/frontend || exit 1
pwd
echo "âœ… å½“å‰ç›®å½•: $(pwd)"

# 3. æ£€æŸ¥å‰ç«¯æ–‡ä»¶
echo "ğŸ“„ æ£€æŸ¥å‰ç«¯æ–‡ä»¶..."
if [ ! -f "index.html" ]; then
    echo "âŒ é”™è¯¯ï¼šæœªæ‰¾åˆ°index.htmlæ–‡ä»¶"
    exit 1
fi

# 4. å¯åŠ¨å‰ç«¯æœåŠ¡
echo "ğŸš€ å¯åŠ¨å‰ç«¯HTTPæœåŠ¡å™¨..."
echo "å‰ç«¯æœåŠ¡å°†åœ¨ http://localhost:7860 å¯åŠ¨"
python -m http.server 7860
```

## åŒæ—¶å¯åŠ¨å‰åç«¯è„šæœ¬ - Start Both Services Script
```bash
#!/bin/bash
# ä»projectç›®å½•æ‰§è¡Œæ­¤è„šæœ¬

echo "ğŸš€ åŒæ—¶å¯åŠ¨JobCatcherå‰åç«¯æœåŠ¡..."

# å¯åŠ¨åç«¯æœåŠ¡ï¼ˆåå°è¿è¡Œï¼‰
echo "ğŸ“¡ å¯åŠ¨åç«¯æœåŠ¡..."
cd JobCatcher/backend
source ../../bin/activate
export PYTHONPATH=/home/devbox/project/JobCatcher/backend:$PYTHONPATH
nohup python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000 > ../../logs/backend.log 2>&1 &
BACKEND_PID=$!
echo "âœ… åç«¯æœåŠ¡å·²å¯åŠ¨ (PID: $BACKEND_PID)"

# ç­‰å¾…åç«¯å¯åŠ¨
sleep 5

# å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆåå°è¿è¡Œï¼‰
echo "ğŸŒ å¯åŠ¨å‰ç«¯æœåŠ¡..."
cd ../frontend
nohup python -m http.server 7860 > ../../logs/frontend.log 2>&1 &
FRONTEND_PID=$!
echo "âœ… å‰ç«¯æœåŠ¡å·²å¯åŠ¨ (PID: $FRONTEND_PID)"

# ä¿å­˜PIDåˆ°æ–‡ä»¶
echo $BACKEND_PID > ../../logs/backend.pid
echo $FRONTEND_PID > ../../logs/frontend.pid

echo "ğŸ‰ JobCatcheræœåŠ¡å¯åŠ¨å®Œæˆï¼"
echo "ğŸ“¡ åç«¯API: http://localhost:8000"
echo "ğŸŒ å‰ç«¯ç•Œé¢: http://localhost:7860"
echo "ğŸ“‹ æŸ¥çœ‹æ—¥å¿—: tail -f logs/backend.log æˆ– tail -f logs/frontend.log"
```

---

# ğŸ› æ•…éšœæ’é™¤ - Troubleshooting

## åç«¯æ•…éšœæ’é™¤ - Backend Troubleshooting

### ç«¯å£é—®é¢˜ - Port Issues
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
sudo ss -tulpn | grep :8000
# å¼ºåˆ¶é‡Šæ”¾ç«¯å£
sudo kill -9 $(sudo lsof -t -i:8000)
# æ€æ­»æ‰€æœ‰uvicornè¿›ç¨‹
pkill -f uvicorn
```

### æ¨¡å—å¯¼å…¥é”™è¯¯ - Module Import Errors
```bash
# æ£€æŸ¥å½“å‰ç›®å½• - å¿…é¡»åœ¨backendç›®å½•ä¸‹
pwd
# åº”è¯¥æ˜¾ç¤º: /home/devbox/project/JobCatcher/backend

# æ£€æŸ¥Pythonè·¯å¾„
python -c "import sys; print('\n'.join(sys.path))"

# æµ‹è¯•å¯¼å…¥
python -c "from app.main import app; print('Import successful')"

# å¦‚æœå¯¼å…¥å¤±è´¥ï¼Œç¡®è®¤ç›®å½•
ls -la app/
```

### è™šæ‹Ÿç¯å¢ƒé—®é¢˜ - Virtual Environment Issues
```bash
# æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒ
which python
python --version
pip --version
# é‡æ–°åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœéœ€è¦ï¼‰
python -m venv venv
source venv/bin/activate
```

## å‰ç«¯æ•…éšœæ’é™¤ - Frontend Troubleshooting

### ç«¯å£é—®é¢˜ - Port Issues
```bash
# æŸ¥æ‰¾å ç”¨7860ç«¯å£çš„è¿›ç¨‹
sudo ss -tulpn | grep :7860
# å¼ºåˆ¶é‡Šæ”¾ç«¯å£
sudo kill -9 $(sudo lsof -t -i:7860)
```

### æ–‡ä»¶è®¿é—®é—®é¢˜ - File Access Issues
```bash
# æ£€æŸ¥å‰ç«¯æ–‡ä»¶æƒé™
ls -la JobCatcher/frontend/
# æ£€æŸ¥index.htmlæ˜¯å¦å­˜åœ¨
cat JobCatcher/frontend/index.html | head -10
```

### æœåŠ¡å™¨é—®é¢˜ - Server Issues
```bash
# å¦‚æœPython HTTPæœåŠ¡å™¨å¤±è´¥ï¼Œå°è¯•å…¶ä»–ç«¯å£
python -m http.server 8080
# æˆ–è€…ä½¿ç”¨å…¶ä»–æœåŠ¡å™¨
php -S localhost:7860  # å¦‚æœå®‰è£…äº†PHP
```

---

# ğŸ“ æ£€æŸ¥æ¸…å• - Checklist

## åç«¯å¯åŠ¨æ£€æŸ¥æ¸…å• - Backend Startup Checklist
å¯åŠ¨å‰å¿…é¡»ç¡®è®¤:
- [ ] ç«¯å£8000æœªè¢«å ç”¨
- [ ] **å½“å‰ç›®å½•ä¸º `JobCatcher/backend`** (æœ€å…³é”®)
- [ ] è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
- [ ] PYTHONPATHå·²æ­£ç¡®è®¾ç½®
- [ ] ä¾èµ–åŒ…å·²å®‰è£…
- [ ] app.mainæ¨¡å—å¯æ­£å¸¸å¯¼å…¥
- [ ] pwdå‘½ä»¤æ˜¾ç¤º: `/home/devbox/project/JobCatcher/backend`

## å‰ç«¯å¯åŠ¨æ£€æŸ¥æ¸…å• - Frontend Startup Checklist
å¯åŠ¨å‰å¿…é¡»ç¡®è®¤:
- [ ] ç«¯å£7860æœªè¢«å ç”¨
- [ ] **å½“å‰ç›®å½•ä¸º `JobCatcher/frontend`**
- [ ] index.htmlæ–‡ä»¶å­˜åœ¨
- [ ] CSSå’ŒJSæ–‡ä»¶ç›®å½•å­˜åœ¨
- [ ] Pythonæˆ–Node.jså¯ç”¨äºå¯åŠ¨HTTPæœåŠ¡å™¨
- [ ] pwdå‘½ä»¤æ˜¾ç¤º: `/home/devbox/project/JobCatcher/frontend`

---

# âš¡ å¿«é€Ÿå‘½ä»¤ - Quick Commands

## åç«¯å¿«é€Ÿå‘½ä»¤ - Backend Quick Commands
```bash
# ä¸€é”®æ£€æŸ¥åç«¯ç¯å¢ƒ (ä»projectç›®å½•)
cd JobCatcher/backend && source ../../bin/activate && python -c "from app.main import app; print('âœ… åç«¯ç¯å¢ƒæ­£å¸¸')"

# ä¸€é”®å¯åŠ¨åç«¯ (ä»projectç›®å½•)
cd JobCatcher/backend && source ../../bin/activate && export PYTHONPATH=$PWD:$PYTHONPATH && pwd && python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

## å‰ç«¯å¿«é€Ÿå‘½ä»¤ - Frontend Quick Commands
```bash
# ä¸€é”®æ£€æŸ¥å‰ç«¯ç¯å¢ƒ (ä»projectç›®å½•)
cd JobCatcher/frontend && ls -la index.html && echo "âœ… å‰ç«¯ç¯å¢ƒæ­£å¸¸"

# ä¸€é”®å¯åŠ¨å‰ç«¯ (ä»projectç›®å½•)
cd JobCatcher/frontend && pwd && python -m http.server 7860
```

## æœåŠ¡ç®¡ç†å‘½ä»¤ - Service Management Commands
```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
pkill -f uvicorn && pkill -f "http.server"

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
ps aux | grep -E "(uvicorn|http.server)"

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep -E ":(8000|7860)"
```

---

# ğŸš¨ å…³é”®è­¦å‘Š - Critical Warning

## åç«¯è­¦å‘Š - Backend Warning
**ç»å¯¹ä¸è¦åœ¨projectæ ¹ç›®å½•ä¸‹æ‰§è¡Œuvicornå‘½ä»¤ï¼**
**Always execute uvicorn command in the backend directory!**

é”™è¯¯ç¤ºä¾‹ (ä¼šå¯¼è‡´ModuleNotFoundError):
```bash
# âŒ é”™è¯¯ - åœ¨projectç›®å½•ä¸‹æ‰§è¡Œ
(jobcatcher_env) devbox@jobcatcher:~/project$ python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
# ç»“æœ: ModuleNotFoundError: No module named 'app'
```

æ­£ç¡®ç¤ºä¾‹:
```bash
# âœ… æ­£ç¡® - åœ¨backendç›®å½•ä¸‹æ‰§è¡Œ
(jobcatcher_env) devbox@jobcatcher:~/project/JobCatcher/backend$ python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
# ç»“æœ: æœåŠ¡æ­£å¸¸å¯åŠ¨
```

## å‰ç«¯è­¦å‘Š - Frontend Warning
**ç¡®ä¿åœ¨frontendç›®å½•ä¸‹å¯åŠ¨å‰ç«¯æœåŠ¡ï¼**
**Always start frontend service in the frontend directory!**

é”™è¯¯ç¤ºä¾‹:
```bash
# âŒ é”™è¯¯ - åœ¨é”™è¯¯ç›®å½•ä¸‹æ‰§è¡Œ
(jobcatcher_env) devbox@jobcatcher:~/project$ python -m http.server 7860
# ç»“æœ: æ— æ³•æ­£ç¡®è®¿é—®å‰ç«¯æ–‡ä»¶
```

æ­£ç¡®ç¤ºä¾‹:
```bash
# âœ… æ­£ç¡® - åœ¨frontendç›®å½•ä¸‹æ‰§è¡Œ
(jobcatcher_env) devbox@jobcatcher:~/project/JobCatcher/frontend$ python -m http.server 7860
# ç»“æœ: å‰ç«¯æœåŠ¡æ­£å¸¸å¯åŠ¨
```

---

**é‡è¦**: æ¯æ¬¡å¯åŠ¨éƒ½å¿…é¡»ä¸¥æ ¼æŒ‰ç…§æ­¤æµç¨‹æ‰§è¡Œï¼Œç‰¹åˆ«æ˜¯ç¡®ä¿åœ¨æ­£ç¡®çš„ç›®å½•ä¸‹æ‰§è¡Œç›¸åº”çš„æœåŠ¡å‘½ä»¤ï¼
